<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Lumina University ‚Äî College Management System</title>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&family=Fraunces:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
/* ============================================================
   RESET & VARIABLES
   ============================================================ */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

:root {
  --font-ui: 'Sora', sans-serif;
  --font-display: 'Fraunces', serif;
  --font-code: 'JetBrains Mono', monospace;

  /* Student: deep navy + coral */
  --s-bg: #0b1120;
  --s-card: rgba(255,255,255,0.035);
  --s-border: rgba(255,255,255,0.08);
  --s-accent: #e8586a;
  --s-accent2: #f7a0ad;
  --s-glow: rgba(232,88,106,0.22);
  --s-nav: #132440;

  /* Teacher: forest + emerald */
  --t-bg: #0a1410;
  --t-card: rgba(255,255,255,0.04);
  --t-border: rgba(255,255,255,0.09);
  --t-accent: #34d399;
  --t-accent2: #6ee7b7;
  --t-glow: rgba(52,211,153,0.22);
  --t-nav: #123324;

  /* Admin: deep violet + orchid */
  --a-bg: #100c1c;
  --a-card: rgba(255,255,255,0.04);
  --a-border: rgba(255,255,255,0.09);
  --a-accent: #a78bfa;
  --a-accent2: #c4b5fd;
  --a-glow: rgba(167,139,250,0.22);
  --a-nav: #1e1636;

  /* Active role colors (set by JS) */
  --bg: var(--s-bg);
  --card: var(--s-card);
  --border: var(--s-border);
  --accent: var(--s-accent);
  --accent2: var(--s-accent2);
  --glow: var(--s-glow);
  --nav: var(--s-nav);

  --text: #eef0f5;
  --text-muted: #7a7f96;
  --text-dim: #4e5266;
  --radius: 14px;
  --radius-sm: 9px;
  --radius-xs: 6px;
}

html { font-size: 15px; }
body {
  font-family: var(--font-ui);
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  transition: background 0.6s;
  overflow-x: hidden;
}

/* ============================================================
   LOGIN PAGE
   ============================================================ */
#loginPage {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  min-height: 100vh; padding: 32px 20px; position: relative; z-index: 2;
}
/* Decorative gradient orbs */
.orb {
  position: fixed; border-radius: 50%; filter: blur(100px); pointer-events: none; z-index: 0;
  transition: background 0.8s, top 0.8s, left 0.8s, width 0.8s, height 0.8s;
}
.orb-1 { width: 420px; height: 420px; top: -140px; left: -100px; background: var(--accent); opacity: .22; }
.orb-2 { width: 340px; height: 340px; bottom: -120px; right: -80px; background: var(--accent2); opacity: .15; }

.login-brand { text-align: center; margin-bottom: 44px; position: relative; z-index: 1; }
.login-brand h1 {
  font-family: var(--font-display); font-size: clamp(2.6rem,5.5vw,3.8rem); font-weight: 700; font-style: italic;
  background: linear-gradient(135deg, #fff 20%, #aab 80%);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  letter-spacing: -0.5px;
}
.login-brand p { color: var(--text-muted); font-size: .82rem; margin-top: 6px; font-weight: 300; letter-spacing: .3px; }

/* Role pills */
.role-pills { display: flex; gap: 10px; justify-content: center; margin-bottom: 32px; position: relative; z-index: 1; flex-wrap: wrap; }
.role-pill {
  display: flex; align-items: center; gap: 10px;
  padding: 11px 20px; border-radius: 40px;
  border: 1.5px solid var(--border); background: var(--card);
  -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(8px); cursor: pointer;
  transition: all .3s cubic-bezier(.4,0,.2,1);
  -webkit-user-select: none; user-select: none;
}
.role-pill:hover { border-color: rgba(255,255,255,0.22); transform: translateY(-2px); }
.role-pill.active { border-color: var(--accent); box-shadow: 0 0 20px var(--glow); }
.role-pill .pill-icon { font-size: 1.15rem; }
.role-pill .pill-label { font-size: .78rem; font-weight: 600; color: var(--text-muted); letter-spacing: .8px; text-transform: uppercase; transition: color .3s; }
.role-pill.active .pill-label { color: var(--accent); }

/* Login card */
.login-card {
  width: 100%; max-width: 380px; position: relative; z-index: 1;
  background: var(--card); border: 1.5px solid var(--border);
  border-radius: var(--radius); -webkit-backdrop-filter: blur(14px); backdrop-filter: blur(14px);
  padding: 34px 30px;
  transition: border-color .4s, box-shadow .4s;
}
.login-card h2 { font-family: var(--font-display); font-size: 1.25rem; font-weight: 600; margin-bottom: 3px; }
.login-card .sub { font-size: .75rem; color: var(--text-muted); margin-bottom: 26px; }
.field { margin-bottom: 16px; }
.field label { display: block; font-size: .7rem; text-transform: uppercase; letter-spacing: 1.8px; color: var(--text-dim); margin-bottom: 6px; font-weight: 500; }
.field input {
  width: 100%; padding: 11px 14px; border-radius: var(--radius-sm);
  border: 1px solid var(--border); background: rgba(255,255,255,0.035);
  color: var(--text); font-family: var(--font-ui); font-size: .82rem; outline: none;
  transition: border-color .3s, box-shadow .25s;
}
.field input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--glow); }
.field input::placeholder { color: var(--text-dim); }
.btn-sign-in {
  width: 100%; padding: 12px; border: none; border-radius: var(--radius-sm);
  background: var(--accent); color: #fff; font-family: var(--font-ui);
  font-size: .82rem; font-weight: 600; letter-spacing: .6px; cursor: pointer;
  transition: filter .2s, transform .15s, box-shadow .3s;
}
.btn-sign-in:hover { filter: brightness(1.15); box-shadow: 0 4px 18px var(--glow); transform: translateY(-1px); }
.btn-sign-in:active { transform: translateY(0); }

/* Demo creds box */
.creds-box {
  margin-top: 22px; padding: 12px 14px; border-radius: 10px;
  border: 1px solid var(--border); background: rgba(255,255,255,0.02);
}
.creds-box p { font-size: .72rem; color: var(--text-muted); line-height: 1.8; }
.creds-box strong { color: var(--text); }
.creds-box .tag {
  display: inline-block; font-size: .62rem; font-weight: 600; padding: 2px 7px;
  border-radius: 4px; background: var(--glow); color: var(--accent); margin-left: 4px;
  letter-spacing: .4px; vertical-align: middle;
}

/* ============================================================
   DASHBOARD SHELL
   ============================================================ */
#dashboard { display: none; min-height: 100vh; position: relative; z-index: 1; flex-direction: column; }

/* TOP NAV */
.topnav {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 28px; height: 56px;
  background: var(--nav); border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 200;
  transition: background 0.6s;
}
.topnav-left { display: flex; align-items: center; gap: 16px; }
.topnav-logo { font-family: var(--font-display); font-size: 1.15rem; font-weight: 600; font-style: italic; color: #fff; }
.role-tag {
  font-size: .62rem; font-weight: 600; letter-spacing: 1.2px; text-transform: uppercase;
  padding: 3px 10px; border-radius: 14px; background: var(--glow); color: var(--accent);
}
.topnav-right { display: flex; align-items: center; gap: 12px; }
.user-chip {
  display: flex; align-items: center; gap: 8px;
  padding: 5px 12px 5px 6px; border-radius: 22px;
  border: 1px solid var(--border); background: rgba(255,255,255,0.04);
}
.user-chip .av {
  width: 26px; height: 26px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: .78rem; font-weight: 600; background: var(--glow); color: var(--accent);
}
.user-chip .uname { font-size: .78rem; font-weight: 500; }
.btn-out {
  font-size: .72rem; font-weight: 500; color: var(--text-muted);
  background: none; border: 1px solid var(--border); padding: 5px 13px;
  border-radius: var(--radius-xs); cursor: pointer; font-family: var(--font-ui);
  transition: all .2s;
}
.btn-out:hover { border-color: var(--accent); color: var(--text); }

/* MAIN NAV TABS (like Chitkara's horizontal nav) */
.mainnav {
  display: flex; gap: 0; background: var(--nav); border-bottom: 1px solid var(--border);
  overflow-x: auto; transition: background 0.6s; padding: 0 24px;
}
.mainnav::-webkit-scrollbar { height: 0; }
.mnav-item {
  font-size: .72rem; font-weight: 500; letter-spacing: .6px; text-transform: uppercase;
  color: var(--text-muted); padding: 12px 18px; white-space: nowrap;
  cursor: pointer; border-bottom: 2px solid transparent;
  transition: all .25s; background: none; border-top: none; border-left: none; border-right: none;
  font-family: var(--font-ui);
}
.mnav-item:hover { color: var(--text); }
.mnav-item.active { color: var(--accent); border-bottom-color: var(--accent); }

/* CONTENT AREA */
.content-area { flex: 1; padding: 28px 32px 40px; max-width: 1200px; margin: 0 auto; width: 100%; }

/* ============================================================
   UNIVERSAL COMPONENTS
   ============================================================ */
.section-title { font-family: var(--font-display); font-size: 1.2rem; font-weight: 600; margin-bottom: 4px; color: var(--text); }
.section-sub { font-size: .73rem; color: var(--text-muted); margin-bottom: 18px; }

/* Sub-tabs (like Personal | Parents | Subjects ...) */
.sub-tabs { display: flex; gap: 4px; margin-bottom: 22px; flex-wrap: wrap; }
.stab {
  font-size: .7rem; font-weight: 500; letter-spacing: .5px; text-transform: capitalize;
  padding: 7px 14px; border-radius: var(--radius-xs);
  border: 1px solid var(--border); background: transparent;
  color: var(--text-muted); cursor: pointer; font-family: var(--font-ui);
  transition: all .22s;
}
.stab:hover { border-color: rgba(255,255,255,0.2); color: var(--text); }
.stab.active { background: var(--glow); border-color: var(--accent); color: var(--accent); }

/* Info table (key-value) */
.info-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 0;
  border-radius: var(--radius); border: 1px solid var(--border); overflow: hidden;
}
.info-row { display: flex; padding: 10px 16px; border-bottom: 1px solid rgba(255,255,255,0.04); }
.info-row:nth-child(odd) { background: rgba(255,255,255,0.015); }
.info-row:last-child, .info-row:nth-last-child(2) { border-bottom: none; }
.info-key { font-size: .73rem; color: var(--text-muted); min-width: 150px; font-weight: 500; }
.info-val { font-size: .78rem; color: var(--text); font-weight: 400; }
.info-val.mono { font-family: var(--font-code); font-size: .7rem; }

/* Data table */
.tbl-wrap { border-radius: var(--radius); border: 1px solid var(--border); overflow: hidden; margin-bottom: 18px; }
table { width: 100%; border-collapse: collapse; }
thead { background: rgba(255,255,255,0.04); }
th {
  text-align: left; padding: 10px 14px; font-size: .65rem;
  text-transform: uppercase; letter-spacing: 1.4px; color: var(--text-dim);
  font-weight: 600; border-bottom: 1px solid var(--border); white-space: nowrap;
}
td {
  padding: 9px 14px; font-size: .78rem; color: var(--text);
  border-bottom: 1px solid rgba(255,255,255,0.04);
}
tr:last-child td { border-bottom: none; }
tr:hover td { background: rgba(255,255,255,0.02); }
td.mono { font-family: var(--font-code); font-size: .68rem; color: var(--text-muted); }
td.dim { color: var(--text-muted); }
td.bold { font-weight: 600; }
.tbl-footer { padding: 8px 14px; font-size: .68rem; color: var(--text-dim); border-top: 1px solid var(--border); background: rgba(255,255,255,0.02); }

/* Badges */
.badge {
  display: inline-block; padding: 2px 9px; border-radius: 10px;
  font-size: .65rem; font-weight: 600; letter-spacing: .4px;
}
.b-green { background: rgba(52,211,153,0.15); color: #34d399; }
.b-red { background: rgba(232,88,106,0.15); color: #e8586a; }
.b-amber { background: rgba(251,191,36,0.15); color: #fbbf24; }
.b-blue { background: rgba(96,165,250,0.15); color: #60a5fa; }
.b-purple { background: rgba(167,139,250,0.15); color: #a78bfa; }
.b-gray { background: rgba(150,160,180,0.15); color: #96a0b4; }

/* Stats row */
.stats-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 14px; margin-bottom: 24px; }
.stat-card {
  padding: 18px 16px; border-radius: var(--radius); border: 1px solid var(--border);
  background: var(--card); position: relative; overflow: hidden;
}
.stat-card .s-label { font-size: .62rem; text-transform: uppercase; letter-spacing: 1.4px; color: var(--text-dim); font-weight: 600; }
.stat-card .s-val { font-family: var(--font-display); font-size: 1.7rem; font-weight: 700; margin-top: 3px; color: var(--accent); }
.stat-card .s-sub { font-size: .65rem; color: var(--text-dim); margin-top: 2px; }
.stat-card .s-ico { position: absolute; top: 14px; right: 16px; font-size: 1.3rem; opacity: .25; }

/* Attendance toggle */
.att-btns { display: flex; gap: 5px; }
.att-btn {
  padding: 4px 10px; border-radius: 5px; font-size: .66rem; font-weight: 600;
  border: 1px solid var(--border); background: transparent;
  color: var(--text-muted); cursor: pointer; font-family: var(--font-ui);
  letter-spacing: .3px; transition: all .18s;
}
.att-btn:hover { filter: brightness(1.3); }
.att-btn.sel-p { background: rgba(52,211,153,0.18); color: #34d399; border-color: #34d399; }
.att-btn.sel-a { background: rgba(232,88,106,0.18); color: #e8586a; border-color: #e8586a; }

/* Medical card */
.med-card {
  display: flex; align-items: flex-start; justify-content: space-between; gap: 16px;
  padding: 16px 18px; border-radius: var(--radius); border: 1px solid var(--border);
  background: var(--card); margin-bottom: 10px; transition: border-color .3s;
}
.med-card:hover { border-color: rgba(255,255,255,0.16); }
.med-info h4 { font-size: .82rem; font-weight: 600; display: flex; align-items: center; gap: 8px; }
.med-info p { font-size: .72rem; color: var(--text-muted); margin-top: 3px; line-height: 1.5; max-width: 440px; }
.med-info .meta { font-size: .64rem; color: var(--text-dim); margin-top: 4px; }
.med-btns { display: flex; gap: 6px; flex-shrink: 0; }
.btn-apr, .btn-rej {
  padding: 5px 13px; border: none; border-radius: var(--radius-xs);
  font-size: .68rem; font-weight: 600; cursor: pointer; font-family: var(--font-ui);
  transition: filter .18s, transform .12s; letter-spacing: .3px;
}
.btn-apr { background: rgba(52,211,153,0.2); color: #34d399; }
.btn-rej { background: rgba(232,88,106,0.2); color: #e8586a; }
.btn-apr:hover, .btn-rej:hover { filter: brightness(1.35); transform: scale(1.03); }

/* Circular card (timeline) */
.circular-item {
  display: flex; gap: 14px; padding: 14px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
.circular-item:last-child { border-bottom: none; }
.circ-dot {
  width: 32px; height: 32px; border-radius: 50%; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center; font-size: .75rem;
  background: var(--glow); color: var(--accent); border: 1px solid var(--border);
}
.circ-content h4 { font-size: .78rem; font-weight: 600; margin-bottom: 2px; }
.circ-content p { font-size: .68rem; color: var(--text-muted); line-height: 1.5; max-width: 520px; }
.circ-content .circ-meta { font-size: .62rem; color: var(--text-dim); margin-top: 3px; }
.unread-tag { font-size: .58rem; font-weight: 700; padding: 2px 6px; border-radius: 4px; background: #e8586a; color: #fff; letter-spacing: .3px; vertical-align: middle; margin-left: 6px; }

/* Comm grid */
.comm-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }
.comm-card {
  padding: 16px; border-radius: var(--radius); border: 1px solid var(--border);
  background: var(--card); cursor: pointer; transition: all .22s;
}
.comm-card:hover { border-color: var(--accent); background: rgba(255,255,255,0.05); transform: translateY(-2px); }
.comm-card .cc-icon { font-size: 1.2rem; margin-bottom: 8px; }
.comm-card .cc-title { font-size: .74rem; font-weight: 600; color: var(--accent); margin-bottom: 3px; }
.comm-card .cc-desc { font-size: .64rem; color: var(--text-dim); line-height: 1.45; }

/* Timetable grid */
.tt-wrap { overflow-x: auto; }
.tt-table { min-width: 780px; border-collapse: collapse; }
.tt-table th, .tt-table td {
  border: 1px solid rgba(255,255,255,0.07); text-align: center; vertical-align: top;
}
.tt-table th { padding: 9px 6px; font-size: .62rem; color: var(--text-dim); background: rgba(255,255,255,0.03); letter-spacing: .8px; text-transform: uppercase; }
.tt-table td { padding: 7px 5px; min-height: 56px; font-size: .64rem; color: var(--text-muted); line-height: 1.5; }
.tt-table td.day-cell { text-align: left; font-weight: 600; color: var(--text); font-size: .72rem; background: rgba(255,255,255,0.025); min-width: 80px; }
.tt-table td .tt-code { color: var(--accent); font-weight: 600; font-size: .66rem; }
.tt-table td .tt-teacher { color: var(--text-dim); font-size: .6rem; margin-top: 2px; }

/* Parent card */
.parent-card {
  display: flex; gap: 20px; align-items: flex-start;
  padding: 20px; border-radius: var(--radius); border: 1px solid var(--border);
  background: var(--card); margin-bottom: 14px;
}
.parent-avatar {
  width: 56px; height: 56px; border-radius: 50%; flex-shrink: 0;
  background: var(--glow); display: flex; align-items: center; justify-content: center;
  font-size: 1.4rem; border: 2px solid var(--border);
}
.parent-details h4 { font-size: .82rem; font-weight: 600; margin-bottom: 6px; }
.parent-details .pd-row { display: flex; gap: 32px; flex-wrap: wrap; }
.parent-details .pd-item .pd-label { font-size: .62rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: .8px; margin-bottom: 2px; }
.parent-details .pd-item .pd-val { font-size: .74rem; color: var(--text); }

/* Fee receipt link */
.print-link { font-size: .68rem; color: var(--accent); cursor: pointer; text-decoration: none; }
.print-link:hover { text-decoration: underline; }

/* Page sections */
.page { display: none; animation: fadeIn .28s ease; }
.page.active { display: block; }
@keyframes fadeIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }

/* Sub-page tabs */
.sub-page { display: none; }
.sub-page.active { display: block; animation: fadeIn .22s ease; }

/* Notification badge */
.notif-badge {
  background: #e8586a; color: #fff; font-size: .58rem; font-weight: 700;
  width: 16px; height: 16px; border-radius: 50%; display: flex; align-items: center;
  justify-content: center; position: absolute; top: -4px; right: -4px;
}

/* ============================================================
   TOAST
   ============================================================ */
.toast {
  position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(80px);
  padding: 11px 22px; border-radius: 10px; background: rgba(20,22,32,0.92);
  border: 1px solid var(--border); color: var(--text); font-size: .75rem; font-weight: 500;
  -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px); transition: transform .32s cubic-bezier(.4,0,.2,1);
  z-index: 9999; pointer-events: none;
}
.toast.show { transform: translateX(-50%) translateY(0); }

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 680px) {
  .content-area { padding: 18px 14px 36px; }
  .info-grid { grid-template-columns: 1fr; }
  .stats-row { grid-template-columns: repeat(2, 1fr); }
}
</style>
</head>
<body>

<!-- Decorative orbs -->
<div class="orb orb-1"></div>
<div class="orb orb-2"></div>

<!-- ============================================================
     LOGIN PAGE
     ============================================================ -->
<div id="loginPage">
  <div class="login-brand">
    <h1>Lumina University</h1>
    <p>Institute of Engineering &amp; Technology ‚Äî Student Information System</p>
  </div>

  <div class="role-pills">
    <div class="role-pill" data-role="student" onclick="pickRole('student')">
      <span class="pill-icon">üéì</span><span class="pill-label">Student</span>
    </div>
    <div class="role-pill" data-role="teacher" onclick="pickRole('teacher')">
      <span class="pill-icon">üìñ</span><span class="pill-label">Teacher</span>
    </div>
    <div class="role-pill" data-role="admin" onclick="pickRole('admin')">
      <span class="pill-icon">‚öôÔ∏è</span><span class="pill-label">Admin</span>
    </div>
  </div>

  <div class="login-card" id="loginCard">
    <h2 id="lcTitle">Welcome Back</h2>
    <p class="sub" id="lcSub">Select a role above, then sign in</p>
    <div class="field"><label>Email / Roll No</label><input type="text" id="inId" placeholder="e.g. student@lumina.edu"/></div>
    <div class="field"><label>Password</label><input type="password" id="inPw" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')signIn()"/></div>
    <button class="btn-sign-in" onclick="signIn()">Sign In</button>
    <div class="creds-box">
      <p>
        <strong>Demo Logins</strong><br/>
        üéì Student &nbsp; <strong>student@lumina.edu</strong> / <strong>1234</strong> <span class="tag">try</span><br/>
        üìñ Teacher &nbsp; <strong>teacher@lumina.edu</strong> / <strong>1234</strong> <span class="tag">try</span><br/>
        ‚öôÔ∏è Admin &nbsp;&nbsp;&nbsp; <strong>admin@lumina.edu</strong>&nbsp; / <strong>1234</strong> <span class="tag">try</span>
      </p>
    </div>
  </div>
</div>

<!-- ============================================================
     DASHBOARD
     ============================================================ -->
<div id="dashboard">
  <!-- Top Nav -->
  <nav class="topnav">
    <div class="topnav-left">
      <span class="topnav-logo">Lumina University</span>
      <span class="role-tag" id="roleTag">Student Portal</span>
    </div>
    <div class="topnav-right">
      <div class="user-chip">
        <div class="av" id="avCircle">M</div>
        <span class="uname" id="topName">Manthan Garg</span>
      </div>
      <button class="btn-out" onclick="logOut()">Logout</button>
    </div>
  </nav>

  <!-- Main Nav Tabs -->
  <div class="mainnav" id="mainNav"></div>

  <!-- Content -->
  <div class="content-area" id="contentArea"></div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<!-- ============================================================
     DATA & LOGIC
     ============================================================ -->
<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// MOCK DATA (mirroring Chitkara screenshots)
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const DB = {
  student: {
    id:'2410991408', name:'Manthan Garg', email:'manthan1408.becse24@lumina.edu',
    mobile:'9729368006', dob:'03-06-2006', dobWords:'Three June Two Thousand Six',
    gender:'Male', category:'General', nationality:'Indian', motherTongue:'Hindi',
    placeOfBirth:'Kaithal', domicile:'Haryana',
    class:'2024-BE-CSE-4 SEM', batch:'2024', dept:'Computer Science',
    rollNo:'2410991408', admissionNo:'2410991408', sem:4,
    mentor:{name:'PRITHA SINGHA ROY', id:'CET1001843'},
    joiningDate:'30-05-2024', joiningWords:'Thirty May Two Thousand Twenty Four',
    address:{
      permanent:{addr1:'Ambala road kaithal haryana', addr2:'---', city:'KAITHAL', pin:'136027', state:'HARYANA', locality:'---'},
      correspondence:{addr1:'Ambala road kaithal haryana', addr2:'---', city:'KAITHAL', pin:'136027', state:'HARYANA', locality:'---'}
    },
    parents:{
      father:{name:'Mr. SACHIN KUMAR', username:'P2410991408', mobile:'9466095095', email:'gargsachin777@gmail.com'},
      mother:{name:'Mrs. SONI GARG', mobile:'8168183114', email:'gargsoni777@gmail.com'},
      guardian:{name:'Mr. SACHIN KUMAR', mobile:'9466095095', email:'gargsachin777@gmail.com'}
    },
    subjects:[
      {code:'24APS0105',name:'Discrete Structures',type:'Theory',credits:'---',group:'24CS-G18'},
      {code:'24ECE0202',name:'Embedded Systems and IOT',type:'Universal',credits:'---',group:'PU24CS-G18A,U24CS-G18'},
      {code:'25MOC0121',name:'Machine Learning Specialization',type:'Theory',credits:'---',group:'24CS-G18'},
      {code:'24CSE0212',name:'Data Structures using OOP-II',type:'Universal',credits:'---',group:'PU24CS-G18A,U24CS-G18'},
      {code:'24CSE0213',name:'Linux Administration',type:'Practical',credits:'---',group:'P24CS-G18'},
      {code:'24CSE0214',name:'Backend Engineering-I',type:'Universal',credits:'---',group:'PU24CS-G18A,U24CS-G18'},
      {code:'24CSE0215',name:'Computer Networks',type:'Theory',credits:'---',group:'24CS-G18'},
      {code:'25MOC0122',name:'Cloud, Data Engg & Scrum',type:'Theory',credits:'---',group:'24CS-G18'},
      {code:'25MOC0123',name:'Networks and Cyber Security',type:'Theory',credits:'---',group:'24CS-G18'},
      {code:'25MOC0124',name:'AI Stack: ML, GenAI & Prompt Engg',type:'Theory',credits:'---',group:'24CS-G18'},
      {code:'24CSE0216',name:'Industry Immersion Series-I',type:'Theory',credits:'---',group:'24CS-G18'},
      {code:'24UNI0124',name:'Cybersecurity For Everyone',type:'Theory',credits:'---',group:'24CS-G18'}
    ],
    timetable: {
      periods: ['1\n04:10 PM\n05:00 PM','2\n05:00 PM\n05:50 PM','3\n05:50 PM\n06:40 PM','4\n06:40 PM\n07:30 PM','5\n07:30 PM\n07:50 PM','6\n07:50 PM\n08:40 PM','7\n08:40 PM\n09:20 PM'],
      days: [
        {day:'Monday',slots:['24CSE0213\nSimran Saini','24CSE0213\nSimran Saini','24CSE0212\nPawan Agrahari','24CSE0212\nPawan Agrahari','---','24CSE0214\nPreenu Mittan','24CSE0214\nPreenu Mittan']},
        {day:'Tuesday',slots:['24CSE0213\nSimran Saini','24CSE0213\nSimran Saini','24CSE0212\nPawan Agrahari','24CSE0212\nPawan Agrahari','---','24CSE0214\nPreenu Mittan','24CSE0214\nPreenu Mittan']},
        {day:'Wednesday',slots:['24APS0105\nMohit Dhuria','---','24CSE0212\nPawan Agrahari','24CSE0212\nPawan Agrahari','---','---','24CSE0215\nSanjoy K Debnath']},
        {day:'Thursday',slots:['24CSE0213\nSimran Saini','24CSE0213\nSimran Saini','24CSE0212\nPawan Agrahari','24CSE0212\nPawan Agrahari','---','24APS0105\nMohit Dhuria','24CSE0215\nSanjoy K Debnath']},
        {day:'Friday',slots:['24CSE0213\nSimran Saini','24CSE0213\nSimran Saini','24CSE0212\nPawan Agrahari','24CSE0212\nPawan Agrahari','---','24CSE0214\nPreenu Mittan','24CSE0215\nSanjoy K Debnath']}
      ]
    },
    attendance:[
      {code:'24APS0105',name:'Discrete Structures',teacher:'MOHIT DHURIA',date:'21-01-2026 ‚Äì 30-01-2026',delivered:5,attended:5,dl:0,ml:0,pct:'100%'},
      {code:'24CSE0212',name:'Data Structures using OOP-II',teacher:'Pawan Agrahari',date:'20-01-2026 ‚Äì 31-01-2026',delivered:18,attended:16,dl:0,ml:0,pct:'88.89%'},
      {code:'24CSE0213',name:'Linux Administration',teacher:'Simran Saini',date:'20-01-2026 ‚Äì 31-01-2026',delivered:10,attended:10,dl:0,ml:0,pct:'100%'},
      {code:'24CSE0214',name:'Backend Engineering-I',teacher:'Preenu Mittan',date:'20-01-2026 ‚Äì 27-01-2026',delivered:4,attended:4,dl:0,ml:0,pct:'100%'},
      {code:'24CSE0215',name:'Computer Networks',teacher:'SANJOY KUMAR DEBNATH',date:'21-01-2026 ‚Äì 30-01-2026',delivered:6,attended:6,dl:0,ml:0,pct:'100%'},
      {code:'24ECE0202',name:'Embedded Systems and IOT',teacher:'ADITYA KUMAR SINGH',date:'03-07-2025 ‚Äì 26-12-2025',delivered:109,attended:86,dl:0,ml:0,pct:'78.9%'}
    ],
    fees:[
      {receipt:'24-25/CDN/03474',paidOn:'30-05-2024',session:'Jul-Dec 2024',amount:20000},
      {receipt:'CU/PB/24-25/03606',paidOn:'30-05-2024',session:'Jul-Dec 2024',amount:100000},
      {receipt:'EXPLR/1013/4155',paidOn:'17-12-2024',session:'JanJun2025',amount:20000},
      {receipt:'FR-42390-1712-133',paidOn:'17-12-2024',session:'JanJun2025',amount:100000},
      {receipt:'FR-47422-2305-68',paidOn:'23-05-2025',session:'Jul-Dec 2025',amount:120000},
      {receipt:'FR-61732-2311-130',paidOn:'23-11-2025',session:'JanJun2026',amount:120500}
    ],
    medical:{
      name:'MANTHAN GARG', dob:'03-06-2006',
      fatherName:'Mr. SACHIN KUMAR', motherName:'Mrs. SONI GARG',
      class:'2024-BE-CSE-4 SEM 4 SEM', bloodGroup:'---',
      height:'---', weight:'---', problems:'---', medication:'---',
      allergiesMed:'---', allergiesFood:'---'
    },
    gradeCard:[
      {sem:1, subjects:[
        {code:'24APS1101',name:'CALCULUS AND STATISTICAL ANALYSIS',credits:4,grade:'A+'},
        {code:'24CSE0101',name:'PROBLEM SOLVING USING PYTHON PROGRAMMING',credits:5,grade:'A'},
        {code:'24CSE0102',name:'FRONT END ENGINEERING-I',credits:5,grade:'O'},
        {code:'24CSE0103',name:'DIGITAL ELECTRONICS AND COMPUTER ARCHITECTURE',credits:4,grade:'A'},
        {code:'24MOC0117',name:'PERSONALITY ENHANCEMENT & PERSONAL BRAND-I',credits:2,grade:'O'},
        {code:'24UNI0125',name:'DISASTER MANAGEMENT',credits:0,grade:'O'}
      ], sgpa:'8.90', cgpa:'8.90'},
      {sem:2, subjects:[
        {code:'24APS0102',name:'MODERN AND COMPUTATIONAL PHYSICS',credits:4,grade:'A'},
        {code:'24APS2101',name:'DIFFERENTIAL EQUATIONS AND TRANSFORMATIONS',credits:4,grade:'A+'},
        {code:'24CSE0105',name:'OPERATING SYSTEM',credits:3,grade:'A+'},
        {code:'24CSE0106',name:'SOURCE CODE MANAGEMENT',credits:2,grade:'O'},
        {code:'24CSE0107',name:'FUNDAMENTALS OF C PROGRAMMING',credits:4,grade:'B+'},
        {code:'24MOC0111',name:'INDIAN KNOWLEDGE SYSTEM',credits:2,grade:'A+'},
        {code:'24MOC0128',name:'PERSONALITY ENHANCEMENT & PERSONAL BRAND-II',credits:2,grade:'O'},
        {code:'24MOC0131',name:'ENVIRONMENTAL STUDIES',credits:2,grade:'A'},
        {code:'25AI001',name:'THE RUDIMENTS OF AI, CHATGPT, DEEPSEEK, GROK AND METAVERSE',credits:1,grade:'O'}
      ], sgpa:'8.63', cgpa:'8.75'}
    ]
  },
  teacher: {
    id:'T1001843', name:'Dr. Pritha Singha Roy', dept:'Computer Science', subject:'Data Structures & OOP',
    email:'teacher@lumina.edu'
  },
  admin: {
    id:'ADM-001', name:'Admin ‚Äî College Management', dept:'Administration'
  },
  // Teacher's class list for attendance marking
  classToday:[
    {sid:'2410991408',name:'Manthan Garg',class:'24CSE0212 ‚Äì Data Structures using OOP-II',status:null},
    {sid:'2410991407',name:'Aisha Verma',class:'24CSE0212 ‚Äì Data Structures using OOP-II',status:null},
    {sid:'2410991409',name:'Rohan Mehta',class:'24CSE0212 ‚Äì Data Structures using OOP-II',status:null},
    {sid:'2410991410',name:'Sneha Bansal',class:'24CSE0212 ‚Äì Data Structures using OOP-II',status:null},
    {sid:'2410991411',name:'Vikram Yadav',class:'24CSE0212 ‚Äì Data Structures using OOP-II',status:null},
    {sid:'2410991412',name:'Pooja Iyer',class:'24CSE0212 ‚Äì Data Structures using OOP-II',status:null}
  ],
  medicals:[
    {id:'MED-2601',student:'Manthan Garg',sid:'2410991408',reason:'Dengue fever ‚Äî Lab report from Fortis Hospital attached. Absent 28‚Äì30 Jan 2026.',date:'2026-01-28',status:'pending'},
    {id:'MED-2602',student:'Aisha Verma',sid:'2410991407',reason:'Left wrist fracture ‚Äî X-ray attached from Civil Hospital.',date:'2026-01-30',status:'pending'},
    {id:'MED-2603',student:'Pooja Iyer',sid:'2410991412',reason:'Severe migraine ‚Äî Doctor note from neurologist enclosed.',date:'2026-01-31',status:'pending'},
    {id:'MED-2604',student:'Vikram Yadav',sid:'2410991411',reason:'Appendicitis surgery ‚Äî Discharge summary attached.',date:'2026-01-29',status:'pending'}
  ],
  // All students (for admin)
  allStudents:[
    {id:'2410991408',name:'Manthan Garg',dept:'CSE',sem:4,cgpa:'8.75',att:'91.2%'},
    {id:'2410991407',name:'Aisha Verma',dept:'CSE',sem:4,cgpa:'9.12',att:'95.0%'},
    {id:'2410991409',name:'Rohan Mehta',dept:'CSE',sem:3,cgpa:'7.88',att:'82.4%'},
    {id:'2410991410',name:'Sneha Bansal',dept:'ECE',sem:4,cgpa:'8.45',att:'88.7%'},
    {id:'2410991411',name:'Vikram Yadav',dept:'MECH',sem:2,cgpa:'7.60',att:'78.9%'},
    {id:'2410991412',name:'Pooja Iyer',dept:'CIVIL',sem:3,cgpa:'8.91',att:'93.3%'},
    {id:'2410991413',name:'Arjun Das',dept:'CSE',sem:4,cgpa:'8.22',att:'85.6%'},
    {id:'2410991414',name:'Kavya Reddy',dept:'ECE',sem:2,cgpa:'9.40',att:'97.1%'}
  ],
  allTeachers:[
    {id:'T1001843',name:'Dr. Pritha Singha Roy',dept:'CSE',subject:'Data Structures & OOP',status:'Active'},
    {id:'T1001210',name:'Prof. Mohit Dhuria',dept:'CSE',subject:'Discrete Structures',status:'Active'},
    {id:'T1001445',name:'Dr. Simran Saini',dept:'CSE',subject:'Linux Administration',status:'Active'},
    {id:'T1001889',name:'Prof. Preenu Mittan',dept:'CSE',subject:'Backend Engineering',status:'Active'},
    {id:'T1001502',name:'Dr. Sanjoy Kumar Debnath',dept:'CSE',subject:'Computer Networks',status:'Active'},
    {id:'T1001670',name:'Prof. Pawan Agrahari',dept:'CSE',subject:'Data Structures (OOP-II)',status:'Active'},
    {id:'T1001334',name:'Dr. Aditya Kumar Singh',dept:'ECE',subject:'Embedded Systems & IoT',status:'Active'}
  ],
  circulars:[
    {title:'Notice for CSE, Batch-2022, 8th sem ‚Äî First Warning Regarding Detention in Final Semester',desc:'Dear Students, kindly see the attached Notice for CSE, Batch-2022, 8th sem regarding detention policy.',date:'Jan 31, Saturday',unread:true},
    {title:'Batch 2024 Sem 4th updated CHO for the subject DSOOPS-II',desc:'Batch 2024 Sem 4th ‚Äî updated Change of Hours order for DSOOPS-II effective immediately.',date:'Jan 31, Saturday',unread:false},
    {title:"Mentor's & Groupwise Students list of CSE, Batch-2022 (8th sem.)",desc:'Dear Students, kindly see the attached file for Mentor & Groupwise Students list of CSE, Batch-2022 (8th sem.) Zeta Cluster & i-zeta students.',date:'Jan 31, Saturday',unread:true},
    {title:'Mid-Semester Exam Schedule ‚Äî Semester 4 (Jan‚ÄìJun 2026)',desc:'The mid-semester examination schedule for all departments has been released. Please refer to your respective timetables.',date:'Jan 28, Wednesday',unread:false},
    {title:'Library Hours Extended During Exam Season',desc:'Library hours have been extended to 10 PM on all weekdays during the mid-semester exam period.',date:'Jan 27, Tuesday',unread:false}
  ]
};

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// STATE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let role = null;   // 'student' | 'teacher' | 'admin'
let user = null;   // active user object
let activeTab = null;  // which mainnav tab

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// THEME SWITCHER
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function applyTheme(r){
  const root = document.documentElement;
  const map = {
    student: {bg:'--s-bg',card:'--s-card',border:'--s-border',accent:'--s-accent',accent2:'--s-accent2',glow:'--s-glow',nav:'--s-nav'},
    teacher: {bg:'--t-bg',card:'--t-card',border:'--t-border',accent:'--t-accent',accent2:'--t-accent2',glow:'--t-glow',nav:'--t-nav'},
    admin:   {bg:'--a-bg',card:'--a-card',border:'--a-border',accent:'--a-accent',accent2:'--a-accent2',glow:'--a-glow',nav:'--a-nav'}
  };
  const m = map[r];
  ['bg','card','border','accent','accent2','glow','nav'].forEach(k=>{
    root.style.setProperty('--'+k, `var(${m[k]})`);
  });
  // orb colors
  const oc = {student:['#e8586a','#f7a0ad'],teacher:['#34d399','#6ee7b7'],admin:['#a78bfa','#c4b5fd']};
  document.querySelector('.orb-1').style.background = oc[r][0];
  document.querySelector('.orb-2').style.background = oc[r][1];
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// LOGIN FLOW
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function pickRole(r){
  role = r;
  document.querySelectorAll('.role-pill').forEach(p=>p.classList.remove('active'));
  document.querySelector(`.role-pill[data-role="${r}"]`).classList.add('active');
  applyTheme(r);
  const titles = {student:'Student Sign In',teacher:'Teacher Sign In',admin:'Administrator Sign In'};
  document.getElementById('lcTitle').textContent = titles[r];
  document.getElementById('lcSub').textContent = `Sign in as ${r} to access your dashboard`;
  const card = document.getElementById('loginCard');
  card.style.borderColor = 'var(--accent)';
  card.style.boxShadow = '0 0 22px var(--glow)';
}
pickRole('student'); // default

function signIn(){
  const id = document.getElementById('inId').value.trim();
  const pw = document.getElementById('inPw').value.trim();
  if(!role){ toast('Please select a role first.'); return; }
  const validMap = {student:'student@lumina.edu',teacher:'teacher@lumina.edu',admin:'admin@lumina.edu'};
  if(pw !== '1234'){ toast('Wrong password. Use: 1234'); return; }
  if(id !== validMap[role]){ toast(`Use ${validMap[role]} for ${role} login.`); return; }

  if(role==='student') user = DB.student;
  else if(role==='teacher') user = DB.teacher;
  else user = DB.admin;

  // hide login, show dashboard
  document.getElementById('loginPage').style.display = 'none';
  document.getElementById('dashboard').style.display = 'flex';
  applyTheme(role);

  // fill topnav
  const tags = {student:'Student Portal',teacher:'Teacher Portal',admin:'Admin Console'};
  document.getElementById('roleTag').textContent = tags[role];
  document.getElementById('avCircle').textContent = user.name[0];
  document.getElementById('topName').textContent = user.name;

  // build nav & content
  buildNav();
  buildContent();
  // default tab
  const defaults = {student:'home',teacher:'attendance',admin:'overview'};
  switchTab(defaults[role]);
}

function logOut(){
  document.getElementById('dashboard').style.display = 'none';
  document.getElementById('loginPage').style.display = 'flex';
  document.getElementById('inId').value='';
  document.getElementById('inPw').value='';
  role=null; user=null; activeTab=null;
  document.querySelectorAll('.role-pill').forEach(p=>p.classList.remove('active'));
  document.getElementById('loginCard').style.borderColor='';
  document.getElementById('loginCard').style.boxShadow='';
  applyTheme('student');
  toast('Logged out successfully.');
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// NAV BUILDER
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function getNavItems(){
  if(role==='student') return [
    {id:'home',label:'Home'},
    {id:'myinfo',label:'My Info'},
    {id:'communication',label:'Communication'},
    {id:'performance',label:'Performance'},
  ];
  if(role==='teacher') return [
    {id:'attendance',label:'Mark Attendance'},
    {id:'medicals',label:'Medical Approvals'},
    {id:'mystudents',label:'My Students'},
  ];
  return [
    {id:'overview',label:'Overview'},
    {id:'students',label:'Students'},
    {id:'teachers',label:'Teachers'},
    {id:'medicals',label:'Medicals'},
  ];
}

function buildNav(){
  const nav = document.getElementById('mainNav');
  nav.innerHTML = getNavItems().map(n=>
    `<button class="mnav-item" data-tab="${n.id}" onclick="switchTab('${n.id}')">${n.label}</button>`
  ).join('');
}

function switchTab(id){
  activeTab = id;
  document.querySelectorAll('.mnav-item').forEach(b=>b.classList.remove('active'));
  const btn = document.querySelector(`.mnav-item[data-tab="${id}"]`);
  if(btn) btn.classList.add('active');
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  const pg = document.getElementById('page_'+id);
  if(pg) pg.classList.add('active');
  // reset sub-tabs to first active
  pg && pg.querySelectorAll('.stab')[0] && pg.querySelectorAll('.stab')[0].click();
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// CONTENT BUILDER
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function buildContent(){
  const area = document.getElementById('contentArea');
  if(role==='student') area.innerHTML = studentPages();
  else if(role==='teacher') area.innerHTML = teacherPages();
  else area.innerHTML = adminPages();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STUDENT PAGES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function studentPages(){
  return `
  <!-- HOME: Timeline / Circulars -->
  <div class="page" id="page_home">
    <div class="section-title">My Timeline</div>
    <div class="section-sub">Session: JanJun2026</div>
    <div style="display:flex;gap:24px;flex-wrap:wrap;">
      <div style="flex:1;min-width:280px;">
        ${DB.circulars.map(c=>`
        <div class="circular-item">
          <div class="circ-dot">üìÑ</div>
          <div class="circ-content">
            <h4>${c.title}${c.unread?'<span class="unread-tag">Unread</span>':''}</h4>
            <p>${c.desc}</p>
            <div class="circ-meta">${c.date}</div>
          </div>
        </div>`).join('')}
      </div>
      <div style="width:220px;flex-shrink:0;">
        <div class="section-title" style="font-size:.82rem;margin-bottom:10px;">Quick Links</div>
        <div style="display:flex;flex-direction:column;gap:6px;">
          ${['Access UHostel','Access UBus','Apply For Reappear','Book Counselling Session','Access LMS'].map(l=>
            `<div style="padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:var(--card);font-size:.72rem;color:var(--text-muted);cursor:pointer;transition:all .2s;" onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--text)'" onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--text-muted)'">${l}</div>`
          ).join('')}
        </div>
        <div style="margin-top:18px;">
          <div class="section-title" style="font-size:.82rem;margin-bottom:8px;">Filters</div>
          <div style="font-size:.72rem;color:var(--text-muted);">Circulars <span style="color:var(--accent);font-weight:600;">63</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- MY INFO: tabbed (Personal | Parents | Subjects | Time Table | Attendance | Fee | Medical | Transport | Downloads) -->
  <div class="page" id="page_myinfo">
    <div class="section-title" style="color:var(--accent);font-size:.88rem;">üîó ${DB.student.name}'s (${DB.student.rollNo}) Details</div>
    <div style="margin-top:14px;">
      <div class="sub-tabs" id="infoTabs">
        ${['Personal','Parents','Subjects','Time Table','Attendance','Fee','Medical'].map((t,i)=>
          `<button class="stab ${i===0?'active':''}" onclick="switchInfoTab('${t}')">${t}</button>`
        ).join('')}
      </div>
      <!-- PERSONAL -->
      <div class="sub-page active" id="sp_Personal">
        <div style="display:flex;gap:24px;flex-wrap:wrap;">
          <div style="flex:1;min-width:260px;">
            <div class="info-grid">
              <div class="info-row"><span class="info-key">Mentor's Name</span><span class="info-val">${DB.student.mentor.name} (${DB.student.mentor.id})</span></div>
              <div class="info-row"><span class="info-key">Admission No.</span><span class="info-val mono">${DB.student.admissionNo}</span></div>
              <div class="info-row"><span class="info-key">Current Grade/Class</span><span class="info-val">${DB.student.class}</span></div>
              <div class="info-row"><span class="info-key">Gender</span><span class="info-val">${DB.student.gender}</span></div>
              <div class="info-row"><span class="info-key">Full Name</span><span class="info-val">${DB.student.name.toUpperCase()}</span></div>
              <div class="info-row"><span class="info-key">Nationality</span><span class="info-val">${DB.student.nationality}</span></div>
              <div class="info-row"><span class="info-key">Roll Number</span><span class="info-val mono">${DB.student.rollNo}</span></div>
              <div class="info-row"><span class="info-key">Category</span><span class="info-val">${DB.student.category}</span></div>
              <div class="info-row"><span class="info-key">Date Of Birth</span><span class="info-val">${DB.student.dob}</span></div>
              <div class="info-row"><span class="info-key">Mother Tongue</span><span class="info-val">${DB.student.motherTongue}</span></div>
              <div class="info-row"><span class="info-key">Date Of Joining</span><span class="info-val">${DB.student.joiningDate}</span></div>
              <div class="info-row"><span class="info-key">Place Of Birth</span><span class="info-val">${DB.student.placeOfBirth}</span></div>
              <div class="info-row"><span class="info-key">Domicile</span><span class="info-val">${DB.student.domicile}</span></div>
              <div class="info-row"><span class="info-key">Email</span><span class="info-val" style="font-size:.68rem">${DB.student.email}</span></div>
              <div class="info-row"><span class="info-key">Mobile No.</span><span class="info-val">${DB.student.mobile}</span></div>
              <div class="info-row"><span class="info-key">Username</span><span class="info-val mono">${DB.student.rollNo}</span></div>
            </div>
            <div style="margin-top:16px;"><div class="section-title" style="font-size:.78rem;margin-bottom:8px;color:var(--text-muted);">Permanent Address</div>
              <div class="info-grid">
                <div class="info-row"><span class="info-key">Address 1</span><span class="info-val">${DB.student.address.permanent.addr1}</span></div>
                <div class="info-row"><span class="info-key">City</span><span class="info-val">${DB.student.address.permanent.city}</span></div>
                <div class="info-row"><span class="info-key">Pin</span><span class="info-val mono">${DB.student.address.permanent.pin}</span></div>
                <div class="info-row"><span class="info-key">State</span><span class="info-val">${DB.student.address.permanent.state}</span></div>
              </div>
            </div>
          </div>
          <div style="width:130px;flex-shrink:0;text-align:center;">
            <div style="width:110px;height:110px;border-radius:50%;background:var(--glow);border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:2.6rem;margin:0 auto;">üë§</div>
          </div>
        </div>
      </div>
      <!-- PARENTS -->
      <div class="sub-page" id="sp_Parents">
        <div class="parent-card">
          <div class="parent-avatar">üë®</div>
          <div class="parent-details">
            <h4>Father's Details</h4>
            <p style="font-size:.72rem;color:var(--accent);margin-bottom:8px;">${DB.student.parents.father.name}</p>
            <div class="pd-row">
              <div class="pd-item"><div class="pd-label">Username</div><div class="pd-val" style="font-family:var(--font-code);font-size:.68rem">${DB.student.parents.father.username}</div></div>
              <div class="pd-item"><div class="pd-label">Mobile No</div><div class="pd-val">${DB.student.parents.father.mobile}</div></div>
              <div class="pd-item"><div class="pd-label">Email</div><div class="pd-val" style="font-size:.72rem">${DB.student.parents.father.email}</div></div>
            </div>
          </div>
        </div>
        <div class="parent-card">
          <div class="parent-avatar">üë©</div>
          <div class="parent-details">
            <h4>Mother's Details</h4>
            <p style="font-size:.72rem;color:var(--accent);margin-bottom:8px;">${DB.student.parents.mother.name}</p>
            <div class="pd-row">
              <div class="pd-item"><div class="pd-label">Mobile No</div><div class="pd-val">${DB.student.parents.mother.mobile}</div></div>
              <div class="pd-item"><div class="pd-label">Email</div><div class="pd-val" style="font-size:.72rem">${DB.student.parents.mother.email}</div></div>
            </div>
          </div>
        </div>
        <div class="parent-card">
          <div class="parent-avatar">üßë</div>
          <div class="parent-details">
            <h4>Guardian's Details</h4>
            <p style="font-size:.72rem;color:var(--accent);margin-bottom:8px;">${DB.student.parents.guardian.name}</p>
            <div class="pd-row">
              <div class="pd-item"><div class="pd-label">Mobile No</div><div class="pd-val">${DB.student.parents.guardian.mobile}</div></div>
              <div class="pd-item"><div class="pd-label">Email</div><div class="pd-val" style="font-size:.72rem">${DB.student.parents.guardian.email}</div></div>
            </div>
          </div>
        </div>
      </div>
      <!-- SUBJECTS -->
      <div class="sub-page" id="sp_Subjects">
        <div class="tbl-wrap"><table>
          <thead><tr><th>#</th><th>Study Period</th><th>Subject Code</th><th>Subject Name</th><th>Subject Type</th><th>Group Name</th></tr></thead>
          <tbody>${DB.student.subjects.map((s,i)=>`<tr>
            <td class="dim">${i+1}</td><td>4 SEM</td><td class="mono">${s.code}</td><td class="bold">${s.name}</td><td>${s.type}</td><td class="dim" style="font-size:.68rem">${s.group}</td>
          </tr>`).join('')}</tbody>
        </table></div>
        <div class="tbl-footer">Found ${DB.student.subjects.length} Rows</div>
      </div>
      <!-- TIMETABLE -->
      <div class="sub-page" id="sp_Time Table">
        <div style="font-size:.75rem;color:var(--text-muted);margin-bottom:10px;"><strong style="color:var(--text)">Class Name:</strong> 2024-BE-CSE-4 SEM ‚Äì CSE ‚Äì EVE ‚Äì 50Mins</div>
        <div class="tt-wrap">
          <table class="tt-table">
            <thead><tr>
              <th style="min-width:80px">Days/Periods</th>
              ${DB.student.timetable.periods.map(p=>{ const parts=p.split('\n'); return `<th>${parts[0]}<br/><span style="color:var(--text-dim);font-size:.58rem">${parts[1]}<br/>${parts[2]}</span>`; }).join('')}
            </tr></thead>
            <tbody>${DB.student.timetable.days.map(d=>`<tr>
              <td class="day-cell">${d.day}</td>
              ${d.slots.map(s=>{ if(s==='---') return '<td style="background:rgba(0,0,0,0.1)">‚Äî</td>'; const lines=s.split('\n'); return `<td><div class="tt-code">${lines[0]}</div><div class="tt-teacher">${lines[1]}</div></td>`; }).join('')}
            </tr>`).join('')}</tbody>
          </table>
        </div>
      </div>
      <!-- ATTENDANCE (per-subject) -->
      <div class="sub-page" id="sp_Attendance">
        <div class="sub-tabs" style="margin-bottom:14px;">
          <button class="stab active" onclick="this.classList.add('active');document.querySelectorAll('#sp_Attendance .att-sub').forEach(e=>e.classList.remove('active'));document.getElementById('attReport').classList.add('active')">Attendance Report</button>
          <button class="stab" onclick="this.classList.add('active');document.querySelectorAll('#sp_Attendance .att-sub').forEach(e=>e.classList.remove('active'));document.getElementById('attRegister').classList.add('active')">Attendance Register</button>
        </div>
        <div class="att-sub active" id="attReport">
          <div class="tbl-wrap"><table>
            <thead><tr><th>#</th><th>Subject Code</th><th>Subject Name</th><th>Teacher Name</th><th>Date</th><th>Delivered</th><th>Attended</th><th>DL</th><th>ML</th><th>%age</th></tr></thead>
            <tbody>${DB.student.attendance.map((a,i)=>`<tr>
              <td class="dim">${i+1}</td><td class="mono">${a.code}</td><td class="bold">${a.name}</td><td class="dim">${a.teacher}</td>
              <td class="dim" style="font-size:.65rem">${a.date}</td><td>${a.delivered}</td><td>${a.attended}</td><td>${a.dl}</td><td>${a.ml}</td>
              <td><span class="badge ${parseFloat(a.pct)>=75?'b-green':'b-red'}">${a.pct}</span></td>
            </tr>`).join('')}</tbody>
          </table></div>
        </div>
        <div class="att-sub" id="attRegister">
          <div style="padding:24px;border-radius:var(--radius);border:1px solid var(--border);background:var(--card);text-align:center;color:var(--text-muted);font-size:.78rem;">
            üìã Detailed day-by-day attendance register will be available after the session ends.
          </div>
        </div>
      </div>
      <!-- FEE -->
      <div class="sub-page" id="sp_Fee">
        <div class="sub-tabs" style="margin-bottom:14px;">
          <button class="stab active">Paid Fee Details</button>
          <button class="stab">Fee Due</button>
        </div>
        <div class="tbl-wrap"><table>
          <thead><tr><th>#</th><th>Receipt No</th><th>Paid On</th><th>Session</th><th>Fee Amount Paid</th><th>Print</th></tr></thead>
          <tbody>${DB.student.fees.map((f,i)=>`<tr>
            <td class="dim">${i+1}</td><td class="mono">${f.receipt}</td><td>${f.paidOn}</td><td>${f.session}</td>
            <td class="bold">‚Çπ ${f.amount.toLocaleString()}</td><td><span class="print-link">Print</span></td>
          </tr>`).join('')}</tbody>
        </table></div>
        <div class="tbl-footer">Found ${DB.student.fees.length} Rows</div>
      </div>
      <!-- MEDICAL -->
      <div class="sub-page" id="sp_Medical">
        <div class="sub-tabs" style="margin-bottom:14px;">
          <button class="stab active">Student Info</button>
          <button class="stab">Dental Report</button>
          <button class="stab">Eye Report</button>
        </div>
        <div style="margin-bottom:14px;"><div class="section-title" style="font-size:.76rem;color:var(--text-muted);margin-bottom:8px;">General Info</div>
          <div class="info-grid">
            <div class="info-row"><span class="info-key">Student Name</span><span class="info-val">${DB.student.medical.name}</span></div>
            <div class="info-row"><span class="info-key">Date Of Birth</span><span class="info-val">${DB.student.medical.dob}</span></div>
            <div class="info-row"><span class="info-key">Father's Name</span><span class="info-val">${DB.student.medical.fatherName}</span></div>
            <div class="info-row"><span class="info-key">Mother's Name</span><span class="info-val">${DB.student.medical.motherName}</span></div>
            <div class="info-row"><span class="info-key">Class</span><span class="info-val">${DB.student.medical.class}</span></div>
            <div class="info-row"><span class="info-key">Blood Group</span><span class="info-val">${DB.student.medical.bloodGroup}</span></div>
            <div class="info-row"><span class="info-key">Height</span><span class="info-val">${DB.student.medical.height}</span></div>
            <div class="info-row"><span class="info-key">Weight</span><span class="info-val">${DB.student.medical.weight}</span></div>
          </div>
        </div>
        <div style="margin-bottom:10px;"><div class="section-title" style="font-size:.76rem;color:var(--text-muted);margin-bottom:8px;">Medical Problems</div>
          <div class="info-grid">
            <div class="info-row"><span class="info-key">Medical Problems</span><span class="info-val">${DB.student.medical.problems}</span></div>
            <div class="info-row"><span class="info-key">Medication Needs</span><span class="info-val">${DB.student.medical.medication}</span></div>
          </div>
        </div>
        <div><div class="section-title" style="font-size:.76rem;color:var(--text-muted);margin-bottom:8px;">Medical Allergies</div>
          <div class="info-grid">
            <div class="info-row"><span class="info-key">Medication Allergies</span><span class="info-val">${DB.student.medical.allergiesMed}</span></div>
            <div class="info-row"><span class="info-key">Food Allergies</span><span class="info-val">${DB.student.medical.allergiesFood}</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- COMMUNICATION -->
  <div class="page" id="page_communication">
    <div class="section-title">Communication</div>
    <div class="section-sub">Access circulars, resources, messages and more</div>
    <div class="comm-grid">
      ${[
        {icon:'üìú',title:'View Circulars',desc:'View latest circulars or notices'},
        {icon:'üìÅ',title:'View Resources',desc:'View resources shared by teachers'},
        {icon:'üìã',title:'View Planners',desc:'View and download the planners uploaded'},
        {icon:'üìß',title:'Message Inbox',desc:'Send/Receive messages from teachers and staff'},
        {icon:'ü™™',title:'Apply Gate Pass',desc:'Apply or view your applied gate passes'},
        {icon:'‚≠ê',title:'View Custom Pages',desc:'View/Participate in ongoing activities open for you'},
        {icon:'üìù',title:'Re-Evaluation Receipt',desc:'Apply or view your re-evaluation'},
        {icon:'üìù',title:'Re-Appear Receipt',desc:'Apply or view your re-appear'},
        {icon:'üìù',title:'Re-Appear Re-Evaluation Receipt',desc:'Apply or view your reappear revaluation'},
        {icon:'üè•',title:'Apply Duty-Medical Leave',desc:'Apply or view leave'},
        {icon:'üìä',title:'Students Experience Survey',desc:'Students Experience Survey'},
        {icon:'üìÑ',title:'Student Data Verification Form',desc:'Student Data Verification Form'},
        {icon:'‚úÖ',title:'No Dues Verification',desc:'To apply and get student\'s no dues form'},
        {icon:'üí¨',title:'My Interactions',desc:'View Interaction'},
        {icon:'üîç',title:'View Lost/Found Items',desc:'Get Details of Lost and Found Items'}
      ].map(c=>`<div class="comm-card"><div class="cc-icon">${c.icon}</div><div class="cc-title">${c.title}</div><div class="cc-desc">${c.desc}</div></div>`).join('')}
    </div>
  </div>

  <!-- PERFORMANCE (Grade Card) -->
  <div class="page" id="page_performance">
    <div class="section-title">Grade Card</div>
    <div class="section-sub">Name: <strong>${DB.student.name.toUpperCase()}</strong> &nbsp; Roll No.: <strong>${DB.student.rollNo}</strong> &nbsp; Class: <strong>${DB.student.class}</strong></div>
    ${DB.student.gradeCard.map(sem=>`
      <div style="margin-bottom:20px;">
        <div class="tbl-wrap"><table>
          <thead><tr><th>#</th><th>Subject Code</th><th>Subject Name</th><th>Credits</th><th>Grade</th><th>Study Period</th></tr></thead>
          <tbody>${sem.subjects.map((s,i)=>`<tr>
            <td class="dim">${i+1}</td><td class="mono">${s.code}</td><td class="bold">${s.name}</td><td>${s.credits}</td>
            <td><span class="badge ${s.grade==='O'?'b-purple':s.grade.startsWith('A')?'b-green':s.grade.startsWith('B')?'b-blue':'b-amber'}">${s.grade}</span></td>
            <td class="dim">${sem.sem} SEM</td>
          </tr>`).join('')}</tbody>
        </table></div>
        <div style="display:flex;justify-content:flex-end;gap:24px;padding:10px 16px;border-radius:8px;border:1px solid var(--border);background:var(--card);margin-top:-1px;">
          <div><span class="dim" style="font-size:.68rem">SGPA: </span><strong style="color:var(--accent)">${sem.sgpa}</strong></div>
          <div><span class="dim" style="font-size:.68rem">CGPA: </span><strong style="color:var(--accent2)">${sem.cgpa}</strong></div>
        </div>
      </div>
    `).join('')}
    <div style="margin-top:18px;padding:14px 18px;border-radius:10px;border:1px solid var(--border);background:var(--card);">
      <p style="font-size:.7rem;color:var(--text-muted);line-height:1.9;">
        <strong style="color:var(--text)">Note:</strong><br/>
        ‚Ä¢ The University does not own for the error or omission, if any, in the statement. The marks in the record of the University are final.<br/>
        ‚Ä¢ In case of any discrepancy in Name, Father's name, Mother's name, Course Code, Course Name, Credit, SGPA & CGPA, kindly submit an application with relevant documents in the Examination Department duly forwarded by the Dean within 7 working days.<br/>
        ‚Ä¢ Student can apply for re-evaluation of theory external examination within 15 days of the date of declaration of result with prescribed fee.
      </p>
    </div>
  </div>`;
}

function switchInfoTab(name){
  document.querySelectorAll('#page_myinfo .stab').forEach(s=>s.classList.remove('active'));
  event.target.classList.add('active');
  document.querySelectorAll('#page_myinfo .sub-page').forEach(p=>p.classList.remove('active'));
  const target = document.getElementById('sp_'+name);
  if(target) target.classList.add('active');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TEACHER PAGES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function teacherPages(){
  return `
  <!-- ATTENDANCE MARKING -->
  <div class="page" id="page_attendance">
    <div class="section-title">Mark Attendance</div>
    <div class="section-sub">Today ‚Äî ${new Date().toLocaleDateString('en-IN',{weekday:'long',year:'numeric',month:'long',day:'numeric'})} &nbsp;|&nbsp; Subject: 24CSE0212 ‚Äì Data Structures using OOP-II</div>
    <div class="tbl-wrap"><table>
      <thead><tr><th>Roll No</th><th>Student Name</th><th>Class/Subject</th><th>Mark Attendance</th></tr></thead>
      <tbody id="attTbody">
        ${DB.classToday.map((s,i)=>`<tr>
          <td class="mono">${s.sid}</td>
          <td class="bold">${s.name}</td>
          <td class="dim" style="font-size:.7rem">${s.class}</td>
          <td>
            <div class="att-btns">
              <button class="att-btn" id="bp_${i}" onclick="markAtt(${i},'present')">‚úì Present</button>
              <button class="att-btn" id="ba_${i}" onclick="markAtt(${i},'absent')">‚úï Absent</button>
            </div>
          </td>
        </tr>`).join('')}
      </tbody>
    </table></div>
  </div>

  <!-- MEDICAL APPROVALS -->
  <div class="page" id="page_medicals">
    <div class="section-title">Medical Approvals</div>
    <div class="section-sub">Pending medical leave applications from students</div>
    <div id="medList">
      ${DB.medicals.map((m,i)=>`
      <div class="med-card" id="mc_${i}">
        <div class="med-info">
          <h4>${m.student} <span class="mono" style="font-size:.62rem;color:var(--text-dim)">(${m.sid})</span> <span class="badge b-amber" id="mb_${i}">${m.status.charAt(0).toUpperCase()+m.status.slice(1)}</span></h4>
          <p>${m.reason}</p>
          <div class="meta">Submitted: ${m.date} &nbsp;|&nbsp; Ref: ${m.id}</div>
        </div>
        <div class="med-btns" id="mbtns_${i}">
          <button class="btn-apr" onclick="actMedical(${i},'approve')">‚úì Approve</button>
          <button class="btn-rej" onclick="actMedical(${i},'reject')">‚úï Reject</button>
        </div>
      </div>`).join('')}
    </div>
  </div>

  <!-- MY STUDENTS -->
  <div class="page" id="page_mystudents">
    <div class="section-title">My Students</div>
    <div class="section-sub">${DB.teacher.subject} ‚Äî ${DB.teacher.dept}</div>
    <div class="tbl-wrap"><table>
      <thead><tr><th>Roll No</th><th>Name</th><th>Dept</th><th>Semester</th><th>CGPA</th><th>Attendance</th><th>Status</th></tr></thead>
      <tbody>${DB.allStudents.map(s=>`<tr>
        <td class="mono">${s.id}</td><td class="bold">${s.name}</td><td>${s.dept}</td><td>Sem ${s.sem}</td>
        <td class="bold" style="color:${parseFloat(s.cgpa)>=8.5?'var(--accent)':'var(--accent2)'}">${s.cgpa}</td>
        <td><span class="badge ${parseFloat(s.att)>=75?'b-green':'b-red'}">${s.att}</span></td>
        <td><span class="badge b-green">Active</span></td>
      </tr>`).join('')}</tbody>
    </table></div>
  </div>`;
}

function markAtt(i, val){
  DB.classToday[i].status = val;
  document.getElementById(`bp_${i}`).className = 'att-btn' + (val==='present'?' sel-p':'');
  document.getElementById(`ba_${i}`).className = 'att-btn' + (val==='absent'?' sel-a':'');
  toast(`${DB.classToday[i].name} marked as ${val}.`);
}

function actMedical(i, action){
  DB.medicals[i].status = action==='approve'?'approved':'rejected';
  const badge = document.getElementById(`mb_${i}`);
  const btns = document.getElementById(`mbtns_${i}`);
  if(action==='approve'){
    badge.className='badge b-green'; badge.textContent='Approved';
    btns.innerHTML='<span style="font-size:.7rem;color:#34d399;font-weight:600;">‚úì Approved</span>';
  } else {
    badge.className='badge b-red'; badge.textContent='Rejected';
    btns.innerHTML='<span style="font-size:.7rem;color:#e8586a;font-weight:600;">‚úï Rejected</span>';
  }
  toast(`Medical for ${DB.medicals[i].student} ${action}d.`);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ADMIN PAGES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function adminPages(){
  const pendMed = DB.medicals.filter(m=>m.status==='pending').length;
  return `
  <!-- OVERVIEW -->
  <div class="page" id="page_overview">
    <div class="section-title">Admin Overview</div>
    <div class="section-sub">College-wide management dashboard</div>
    <div class="stats-row">
      <div class="stat-card"><div class="s-label">Total Students</div><div class="s-val">${DB.allStudents.length}</div><div class="s-sub">Enrolled this session</div><span class="s-ico">üéì</span></div>
      <div class="stat-card"><div class="s-label">Total Teachers</div><div class="s-val">${DB.allTeachers.length}</div><div class="s-sub">Active staff members</div><span class="s-ico">üìñ</span></div>
      <div class="stat-card"><div class="s-label">Departments</div><div class="s-val">4</div><div class="s-sub">CSE ¬∑ ECE ¬∑ MECH ¬∑ CIVIL</div><span class="s-ico">üè¢</span></div>
      <div class="stat-card"><div class="s-label">Pending Medicals</div><div class="s-val" style="color:#e8586a">${pendMed}</div><div class="s-sub">Awaiting approval</div><span class="s-ico">üè•</span></div>
      <div class="stat-card"><div class="s-label">Avg CGPA</div><div class="s-val">8.52</div><div class="s-sub">Institution average</div><span class="s-ico">üìä</span></div>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:4px;">
      <div>
        <div class="section-title" style="font-size:.82rem;margin-bottom:10px;">Top Students</div>
        <div class="tbl-wrap"><table>
          <thead><tr><th>Name</th><th>Dept</th><th>CGPA</th><th>Att</th></tr></thead>
          <tbody>${DB.allStudents.sort((a,b)=>parseFloat(b.cgpa)-parseFloat(a.cgpa)).slice(0,5).map(s=>`<tr>
            <td class="bold">${s.name}</td><td class="dim">${s.dept}</td>
            <td class="bold" style="color:var(--accent)">${s.cgpa}</td>
            <td><span class="badge ${parseFloat(s.att)>=75?'b-green':'b-red'}">${s.att}</span></td>
          </tr>`).join('')}</tbody>
        </table></div>
      </div>
      <div>
        <div class="section-title" style="font-size:.82rem;margin-bottom:10px;">Staff Directory</div>
        <div class="tbl-wrap"><table>
          <thead><tr><th>Name</th><th>Subject</th></tr></thead>
          <tbody>${DB.allTeachers.slice(0,5).map(t=>`<tr>
            <td class="bold">${t.name}</td><td class="dim" style="font-size:.7rem">${t.subject}</td>
          </tr>`).join('')}</tbody>
        </table></div>
      </div>
    </div>
  </div>

  <!-- STUDENTS -->
  <div class="page" id="page_students">
    <div class="section-title">Student Records</div>
    <div class="section-sub">Manage all enrolled students</div>
    <div class="tbl-wrap"><table>
      <thead><tr><th>Roll No</th><th>Name</th><th>Department</th><th>Semester</th><th>CGPA</th><th>Attendance</th><th>Status</th></tr></thead>
      <tbody>${DB.allStudents.map(s=>`<tr>
        <td class="mono">${s.id}</td><td class="bold">${s.name}</td><td>${s.dept}</td><td>Sem ${s.sem}</td>
        <td class="bold" style="color:${parseFloat(s.cgpa)>=8.5?'var(--accent)':'var(--accent2)'}">${s.cgpa}</td>
        <td><span class="badge ${parseFloat(s.att)>=75?'b-green':'b-red'}">${s.att}</span></td>
        <td><span class="badge b-green">Active</span></td>
      </tr>`).join('')}</tbody>
    </table></div>
  </div>

  <!-- TEACHERS -->
  <div class="page" id="page_teachers">
    <div class="section-title">Teacher Records</div>
    <div class="section-sub">Manage college staff</div>
    <div class="tbl-wrap"><table>
      <thead><tr><th>ID</th><th>Name</th><th>Department</th><th>Subject</th><th>Status</th></tr></thead>
      <tbody>${DB.allTeachers.map(t=>`<tr>
        <td class="mono">${t.id}</td><td class="bold">${t.name}</td><td>${t.dept}</td><td>${t.subject}</td>
        <td><span class="badge b-green">${t.status}</span></td>
      </tr>`).join('')}</tbody>
    </table></div>
  </div>

  <!-- MEDICALS (admin) -->
  <div class="page" id="page_medicals">
    <div class="section-title">Medical Requests</div>
    <div class="section-sub">All student medical leave applications</div>
    <div id="adminMedList">
      ${DB.medicals.map((m,i)=>`
      <div class="med-card" id="amc_${i}">
        <div class="med-info">
          <h4>${m.student} <span class="mono" style="font-size:.62rem;color:var(--text-dim)">(${m.sid})</span> <span class="badge b-amber" id="amb_${i}">${m.status.charAt(0).toUpperCase()+m.status.slice(1)}</span></h4>
          <p>${m.reason}</p>
          <div class="meta">Submitted: ${m.date} &nbsp;|&nbsp; Ref: ${m.id}</div>
        </div>
        <div class="med-btns" id="ambtns_${i}">
          <button class="btn-apr" onclick="actAdminMed(${i},'approve')">‚úì Approve</button>
          <button class="btn-rej" onclick="actAdminMed(${i},'reject')">‚úï Reject</button>
        </div>
      </div>`).join('')}
    </div>
  </div>`;
}

function actAdminMed(i, action){
  DB.medicals[i].status = action==='approve'?'approved':'rejected';
  const badge = document.getElementById(`amb_${i}`);
  const btns = document.getElementById(`ambtns_${i}`);
  if(action==='approve'){
    badge.className='badge b-green'; badge.textContent='Approved';
    btns.innerHTML='<span style="font-size:.7rem;color:#34d399;font-weight:600;">‚úì Approved</span>';
  } else {
    badge.className='badge b-red'; badge.textContent='Rejected';
    btns.innerHTML='<span style="font-size:.7rem;color:#e8586a;font-weight:600;">‚úï Rejected</span>';
  }
  toast(`Medical for ${DB.medicals[i].student} ${action}d.`);
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// TOAST
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let toastT;
function toast(msg){
  const el = document.getElementById('toast');
  el.textContent = msg; el.classList.add('show');
  clearTimeout(toastT);
  toastT = setTimeout(()=>el.classList.remove('show'), 2400);
}
</script>
</body>
</html>